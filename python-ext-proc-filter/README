### Build proto

1. Install protoc. See instructions if [needed](https://betterproto.github.io/python-betterproto2/getting-started/)
- Install the proto compiler and tools: 
```
pip install grpcio-tools
pip install betterproto2_compiler
```
2. Build the python `envoy` protobufs
- Code to help pull and build the python code from proto files: https://github.com/cetanu/envoy_data_plane.git
- Run: python utils/download_protobufs.py
NOTE: This will build the envoy proto in src/envoy_data_plane_pb2. Copy the src/envoy_data_plane_pb2/envoy to where you need it. 
3. Get the python xds protobufs:
```
git clone https://github.com/cncf/xds.git
```
NOTE: This repo contains the python code for `validate, xds, udpa`. Go to folder python. Copy the needed folders or run
setup.py to install.
4. In the end you need `envoy, validate, xds, udpa` python protobufs folders copied into `src` to run example server.py
5. Run `python server.py`

### Build docker image and add to cluster

From `python-ext-proc-filter` folder

```
docker build -t ej-extproc-server:latest .
kind load docker-image ej-extproc-server:latest --name mcp-gateway
kubectl apply -f ext-proc.yaml 
kubectl apply -f filter.yaml 
```

